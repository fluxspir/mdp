NAME
     mdp - minimalist password safe

SYNOPSIS
     mdp -e [-Vh] [-c config] [-k key_id]
     mdp -g [-Vh] [-c config] [-p profile] [-n count] [-l length]
     mdp [-ErqVh] [-c config] keyword ...

DESCRIPTION
     mdp wraps GnuPG, your favorite editor, a password generator and a custom
     temporary fullscreen pager to let you manage your password library.

     Naturally edit your password file (create, sort, delete) with your
     editor, rely on GnuPG to do the right thing for crypto and let mdp do the
     rest. In order to avoid passwords to linger on your screen, results from
     your queries are displayed through a custom pager that gets cleared after
     a customizable timeout (default 10 seconds).

     The options are as follows:

     -c config
             Use an alternate configuration file.

     -e      Edit your password file (decrypt and re-encrypt after the fact).

     -g      Generate password(s) according to your configuration or command-
             line arguments.

     -E      Use regexes instead of plain text matches (e.g. ^.mail).

     -k key_id
             GnuPG key id (8 alpha-numeric characters). This could be used to
             specify your GnuPG key id in case you did not define it in your
             configuration file.

     -p profile
             Choose which profile to use among the ones defined in your
             configuration file.

     -n count
             Number of passwords to generate. This command line parameter will
             override all other values of password_count (global and profile).

     -l length
             Length of generated passwords (in bytes). This command line
             parameter will override all other values of password_count
             (global and profile).

     -q      Start mdp in query mode instead of displaying results directly.
             This will avoid you from entering your GPG password multiple
             time. Query mode times out after a few seconds of inactivity.

     -r      Displays the result without pager, plain terminal dump (not
             recommended).

     -V      Print version.

     -h      Print usage.

USAGE
     1. Create your GPG key if you don't already have one.

     2. Setup your EDITOR variable if it's not already done.

     3. Create a .mdp/config file from the example (at least gpg_key_id).

     4. Pick a password from randomly generated ones, for example:

                   mdp -g

     5. Run mdp -e and add a line such as:

                   twitter sponge@bob.com yHVHPnqXyx6qUuki

     6. Now when you need your Twitter password, you can just type:

                   mdp twitter

CONFIGURATION
     This is a summary of all the available configuration variables and
     options:

     set gpg_path path
             GnuPG absolute path (default: /usr/bin/gpg)

     set gpg_key_id key_id
             GnuPG key id (default: none). If no key is selected, mdp will
             expect you to specify it on the command-line (-k). If no key was
             specified either way, mdp will abort. That this parameter is
             ignored during the decryption phase, GnuPG picks the key based on
             the content of the password file.

     set gpg_timeout seconds
             Number of seconds to give GnuPG for password and pipe
             interaction. The default value is 10 seconds. This will kill
             GnuPG if forgotten at the password prompt or if it cannot
             communicate with the parent process.

     set editor path
             Path to your favorite editor. You typically don't need to set
             this variable since mdp will use your default editor (as defined
             by $EDITOR). If mdp detects vim, it will attempt to add the -n
             parameter to avoid vim from creating swap files.

     set password_count count
             Define how many password to show with using -g. Default: 4 or as
             defined in the profile.

     set character_count count
             Define how many characters to randomize per password. Default: 16
             or as defined in the profile.

     set character_set characters
             Define all the characters to use in your passwords. Default: all
             alphanumeric (upper and lower case) or as define in the profile.
             The following aliases are supported as shortcuts: $LOWERCASE,
             $UPPERCASE, $ALPHA, $DIGITS, $ALPHANUMERIC, $SYMBOLS, $PRINTABLE.

     set backup no
             Define whether we keep a backup every time we edit the password
             file. Default: yes.

     set timeout seconds
             This variable define how long the pager will display your
             passwords. The default value is 10 seconds.  mdp will use your
             default editor (as defined by $EDITOR).

     profile name
             All the variables define below a profile header will be specific
             to this profile. For now only password_count, character_count and
             character_set are valid options.

FAQ
     Why not 'shred' the temporary file?
             If you are afraid of getting your disk stolen, encrypt it. Shred
             has limited use on most journaled filesystems.

     What if I don't trust 'root'?
             You're screwed, you can't trust this machine with your valuable
             information.

     What if my server is virtualized?
             Same answer as above, if you don't trust your hosting provider or
             IaaS, good luck.

ENVIRONMENT
     EDITOR           The content of this variable will be used as default
                      editor if the configuration does not alter it.

FILES
     $HOME/.mdp/config                 Main configuration file for mdp.  You
                                       need at least your gpg_key_id in there,
                                       without it you will be required to
                                       specify it every single time.

     $HOME/.mdp/passwords              Encrypted list of passwords.

     $HOME/.mdp/passwords.bak          This file is a copy of your password
                                       file, before the last edit. You can
                                       revert to the last file by simply
                                       replacing your password file. Creation
                                       of this file can be disabled (see "set
                                       backup").

     $HOME/.mdp/lock                   This file is created while you edit
                                       your password list to avoid two copies
                                       of mdp to run at the same time for the
                                       same user.

SEE ALSO
     gpg(1), sh(1)

BUGS
     - None that we know of.

AUTHORS
     mdp was written by Bertrand Janin <b@janin.com> and is distributed under
     an ISC license (BSD, MIT and OSI compatible).

     A bunch of utility functions are borrowed from OpenBSD and OpenSSH, both
     under ISC and BSD licenses, with copyrights from the following authors:

         Copyright (c) 2004 Ted Unangst and Todd Miller
         Copyright (c) 1998 Todd C. Miller <Todd.Miller@courtesan.com>
         Copyright (c) 2000 Markus Friedl.  All rights reserved.
         Copyright (c) 2005,2006 Damien Miller.  All rights reserved.

     The random password generator was mostly borrowed from apg (also BSD
     licensed), with the following copyright notice:

         Copyright (c) 1999, 2000, 2001, 2002, 2003
         Adel I. Mirzazhanov. All rights reserved

     The array and xmalloc libraries are taken from tmux, with the following
     copyright notices:

         Copyright (c) 2004 Nicholas Marriott <nicm@users.sourceforge.net>
         Copyright (c) 2006 Nicholas Marriott <nicm@users.sourceforge.net>

